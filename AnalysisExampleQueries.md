# Example Queries

## GT - Treatment Group Distribution

```sql
SELECT GTANSWERTREATMENTGROUP, COUNT(DISTINCT USERID)
FROM EVENTS
WHERE EVENTNAME = 'gameTuneAnswerUsed'
AND GTANSWERNAME = 'difficulty_ramp'
GROUP BY GTANSWERTREATMENTGROUP
```

## GT - Answer Distribution

```sql
SELECT GTANSWERVALUE, COUNT(DISTINCT USERID)
FROM EVENTS
WHERE EVENTNAME = 'gameTuneAnswerUsed'
AND GTANSWERNAME = 'difficulty_ramp'
GROUP BY GTANSWERVALUE
```

## GT - Answer Distribution per Day

```sql
SELECT EVENTDATE, GTANSWERVALUE,
        COUNT(DISTINCT USERID) AS DAU
FROM EVENTS
WHERE EVENTNAME = 'gameTuneAnswerUsed'
AND GTANSWERNAME = 'difficulty_ramp'
GROUP BY EVENTDATE, GTANSWERVALUE
ORDER BY EVENTDATE
```

## GT - New Player Retention % per Answer Variant

```sql
WITH FIRST_PASS AS
  (SELECT DATEDIFF(DAY, PLAYER_START_DATE, EVENT_DATE) AS DAYS_SINCE_INSTALL,
          ROUND(COUNT(DISTINCT USER_ID)/MAX(COUNT(DISTINCT USER_ID)) OVER (PARTITION BY DAYS_SINCE_INSTALL)*100., 2.) AS "% RETENTION",
          GTANSWER
   FROM FACT_USER_SESSIONS_DAY FUSD
   JOIN (SELECT USERID, FIRST_VALUE(GTANSWERVALUE) OVER (PARTITION BY USERID ORDER BY EVENTDATE ASC) AS GTANSWER
         FROM EVENTS
         WHERE EVENTNAME = 'gameTuneAnswerUsed'
         AND GTANSWERNAME = 'difficulty_ramp')
   ON USER_ID = USERID
   WHERE DAYS_SINCE_INSTALL >= 0
   GROUP BY DAYS_SINCE_INSTALL,
            GTANSWER)
            
SELECT *
FROM FIRST_PASS
ORDER BY DAYS_SINCE_INSTALL
```
